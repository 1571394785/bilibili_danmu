<!DOCTYPE html>
<html>
<head>
    <!-- 禁用手机缩放 -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>bilibili弹幕姬</title>
    <!--您好，感谢您浏览这一串大便一样的代码
                  ╭━━━━╮
          ╭╮╭━━━━━┫┃▋▋━▅
          ┃╰┫     ┃┃    ╰-┫
          ╰━┫     ╰╯╰┳━━━━╯
          / ┃┏┳┳━━┓┏┳┫
shitty code ┗┛┗┛  ┗┛┗┛
--> <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js" type="text/javascript"></script>
    <!-- jquery.danmu.js (//github.com/chiruom/danmu/) - Licensed under the MIT license -->
    <script src="js\jquery.danmu.min.js" type="text/javascript"></script>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <style>
        body {
            background-color: #fb7299;
            color: #ffffff;
            font-family: "inherit";
            text-align: center;
            margin: 0;
            user-select: none;
        }
        h1 {
            font-size: 100px;
            font-weight: bold;
            margin-top: 10px;
            text-shadow: 0 0 5px #ffffff;
            transition: 0.5s;
        }
        h1:hover {
            color: rgba(255, 255, 255, 0.5);
            -webkit-text-stroke: 1.5px rgb(0, 0, 0);
        }
        .js {
            font-size: 30px;
            font-weight: bold;
            text-shadow: 0 0 2px #ffffff;
        }
        #danmu{
            margin: 0;
            padding: 0;
        }
        #head{
        width: max-content;
        height: auto;
        background-color: rgba(0, 0, 0,0.2);
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
        padding: 20px;
        position: absolute;
        top: 7%;
        left: 0%;
        right: 0%;
        margin: auto;
        z-index: -1;
        /* 圆角 */
        border-radius: 20px;
        transition: all 0.2s;
        perspective: 500px;
        cursor: pointer;
    }
    </style>
</head>
<body>
    <div id="head">
        <h1>哔哩哔哩弹幕姬</h1>
        <div class="js">这软件儿可以把B站弹幕塞进任何视频观看</div>
        <div class="js">（目前智齿本地视频）</div>
    </div>
    <div id="danmu"></div>
    <!-- 生成按钮 -->
    <div id="button" style="margin-top: 50px;">
        <button id="start" style="font-size: 20px; font-weight: bold; background-color: #00AEEC; color: #ffffff; border: 0; border-radius: 10px; padding: 10px 20px; margin: 0 10px; cursor: pointer;">下载</button>
    <script>
        //计算鼠标在#head上的位置
        $('#head').mousemove(function (e) {
            var x = e.pageX - $(this).offset().left;
            var y = e.pageY - $(this).offset().top;
            var w = $(this).width();
            var h = $(this).height();
            var x1 = x / w;
            var y1 = y / h;
            var x2 = x1 - 0.5;
            var y2 = y1 - 0.5;
            var x3 = x2 * 10;
            var y3 = y2 * 10;
            $(this).css('transform', 'perspective(500px) rotateX(' + -y3 + 'deg) rotateY(' + x3 + 'deg)');
        });
        //鼠标离开#head重置
        $('#head').mouseleave(function () {
            $(this).css('transform', 'perspective(700px) rotateX(0deg) rotateY(0deg)');
        });
        // 生成弹幕div
        function createdanmu() {
            danmu= window.danmu
            color=["#FE0302","#FF7204","#FFAA02","#FFD302","#FFFF00","#A0EE00","#00CD00","#019899","#4266BE","#89D5FF","#CC0273","#222222","#9B9B9B","#FFFFFF"];
            random_danmu=danmu[Math.floor(Math.random()*danmu.length)];
            random_color=color[Math.floor(Math.random()*color.length)];
            //random_position大部分0，少部分1，2
            random_position=Math.floor(Math.random()*3);
            random_position=String(random_position);
            json1 = {
                "text": random_danmu,
                "color":random_color,
                "size": "1",
                "position": "0",
                "time": $('#danmu').data("nowTime")+1
            };
            return json1;
        }
        function add(){
            var dm=createdanmu()
            $("#danmu").danmu("addDanmu",dm)
        }
        //get弹幕
        function getdanmu(){
            $.ajax({
                type: "GET",
                url: "danmu.txt",
                dataType: "text",
                success: function (data) {
                    danmu = data.split("\n");
                    console.log(danmu);
                }
            });
        }
        // 监听窗口大小
        $(window).resize(function () {
            danmuDom = document.getElementById("danmu");
            danmuDom.style.height = window.innerHeight - 1 + "px";
            danmuDom.style.width = window.innerWidth-1 + "px";
        });
        //运行
        $("#danmu").danmu({
            height: window.innerHeight-1,   //弹幕区域高度
            width: window.innerWidth,   //弹幕区域宽度
            zindex :-2,   //弹幕区域z-index属性
            speed:9000,      //滚动弹幕的默认速度，这是数值是弹幕滚过每672像素所需要的时间（毫秒）
            sumTime:65565,   //弹幕流的总时间
            danmuLoop:false,   //是否循环播放弹幕
            defaultFontColor:"#FFFFFF",   //弹幕的默认颜色
            fontSizeSmall:16,     //小弹幕的字号大小
            FontSizeBig:24,       //大弹幕的字号大小
            opacity:"0.6",			//默认弹幕透明度
            topBottonDanmuTime:6000,   // 顶部底部弹幕持续时间（毫秒）
            SubtitleProtection:false,     //是否字幕保护
            positionOptimize:false,         //是否位置优化，位置优化是指像AB站那样弹幕主要漂浮于区域上半部分
            maxCountInScreen: 1000,   //屏幕上的最大的显示弹幕数目,弹幕数量过多时,优先加载最新的。
            maxCountPerSec: 1000      //每分秒钟最多的弹幕数目,弹幕数量过多时,优先加载最新的。
        });
        getdanmu();
        $("#danmu").danmu("danmuStart");
        setInterval(add,101);
    </script>
</body>
</html>

    